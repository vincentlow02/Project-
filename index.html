<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inspirational Quotes</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="progressBar"></div>

    <main class="container" id="mainContent">
        <section class="page" id="page1">
            <div class="content">
                <h1>旅は真の知識の大きな泉である</h1>
                <p>ベンジャミン・ディズレーリ</p>
            </div>
            <div class="scroll-indicator">
                <div class="icon-container">
                    <img src="assets/arrow-down.svg" alt="Scroll down arrow">
                </div>
                <span>Scroll to continue</span>
            </div>
            <div class="audio-icon">
                <div class="icon-container">
                    <img id="audioIconImg" src="assets/volume-on.svg" alt="Audio icon">
                </div>
            </div>
        </section>

        <section class="page" id="page2">
            <div class="content fade-in-section">
                <h1>目的地というものは決して場所ではなく、<br>物事の新しい見方である。</h1>
                <p>ヘンリー・ミラー</p>
            </div>
        </section>

        <section class="page" id="page3">
            <div class="content fade-in-section">
                <h1>A New Chapter</h1>
                <p>Your journey continues.</p>
                <div id="enterButton">
                    <span>Enter</span>
                </div>
                <p class="subtitle">Click enter to continue</p>
            </div>
        </section>
    </main>

    <section class="page hidden" id="searchInterface">

        <div id="sidebar" class="collapsed">

            <div class="sidebar-icon-bar">
                <div class="sidebar-item" id="sidebar-toggle">
                    <div class="icon">
                        <img src="assets/arrow-left.svg" alt="Toggle Sidebar">
                    </div>
                    </div>

                <div class="sidebar-nav">
                    <div class="sidebar-item">
                        <div class="icon">
                            <img src="assets/plus.svg" alt="New">
                        </div>
                    </div>
                    <div class="sidebar-item active">
                        <div class="icon">
                            <img src="assets/search-icon.svg" alt="Home">
                        </div>
                        <span class="label">ホーム</span>
                    </div>
                    <div class="sidebar-item">
                        <div class="icon">
                            <img src="assets/star.svg" alt="Saved">
                        </div>
                        <span class="label">保存</span>
                    </div>
                    <div class="sidebar-item">
                        <div class="icon">
                            <img src="assets/discover.svg" alt="Discover">
                        </div>
                        <span class="label">発見</span>
                    </div>
                </div>
            </div>

            <div class="sidebar-content-panel">
                <div class="panel-header">
                    <span class="panel-title">ホーム</span>
                    <img src="assets/pin.svg" alt="Pin">
                </div>
                <div class="panel-button">
                    <img src="assets/plus.svg" alt="New">
                    <span>新しいチャット</span>
                </div>
                <div class="panel-section">
                    <h3 class="subheader">チャット</h3>
                    <ul class="chat-list">
                        <li>海外旅行おすすめ</li>
                    </ul>
                </div>
            </div>
        </div>
         <main id="page-content">
            <div class="widget-container">
                <div class="date">Mon 5</div>
                <div class="time">9:41</div>
                <div class="weather">
                    <img class="weather-icon" src="assets/weather-icon.svg" alt="Weather">
                    <span class="temperature">19°</span>
                </div>
                <div class="location">Tokyo JP</div>
            </div>

            <div class="search-bar">
                <input type="text" placeholder="Placeholder">
                <img class="search-bar-icon" src="assets/mic.svg" alt="Voice Search">
            </div>
        </main>
        <div class="search-bar">
            <input type="text" placeholder="気軽に聞く">
        </div>
        <div class="bottom-right-button"></div>

    </section>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Element Selections ---
            const container = document.querySelector('.container');
            const progressBar = document.getElementById('progressBar');
            const enterButton = document.getElementById('enterButton');
            const mainContent = document.getElementById('mainContent');
            const searchInterface = document.getElementById('searchInterface');
            const audioIconContainer = document.querySelector('.audio-icon');
            const audioIconImg = document.getElementById('audioIconImg');
            
            // --- State Variables ---
            let isMuted = false;

            // --- Logic for "Enter" button to show Search Interface ---
            enterButton.addEventListener('click', () => {
                mainContent.classList.add('fade-out');
                progressBar.style.display = 'none';
                setTimeout(() => {
                    mainContent.style.display = 'none';
                    searchInterface.classList.remove('hidden');
                }, 800);
            });

            // --- Logic for Audio Icon Toggle ---
            audioIconContainer.addEventListener('click', () => {
                isMuted = !isMuted;
                if (isMuted) {
                    audioIconImg.src = 'assets/volume-off.svg';
                } else {
                    audioIconImg.src = 'assets/volume-on.svg';
                }
            });

            // --- Logic for Page 1 Fade-out on Scroll ---
            const page1Elements = document.querySelectorAll('#page1 .content, #page1 .scroll-indicator');
            function handlePage1Fade() {
                const scrollTop = container.scrollTop;
                const pageHeight = container.clientHeight;
                const opacity = Math.max(0, 1 - (scrollTop / (pageHeight * 0.5)));
                page1Elements.forEach(el => {
                    el.style.opacity = opacity;
                });
            }

            // --- Logic for Progress Bar Update ---
            function updateProgressBar() {
                const scrollTop = container.scrollTop;
                const scrollHeight = container.scrollHeight - container.clientHeight;
                const scrollProgress = (scrollTop / scrollHeight) * 100;
                progressBar.style.height = scrollProgress + '%';
            }

            // --- Logic for Fade-in Sections (Intersection Observer) ---
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                    } else {
                        entry.target.classList.remove('is-visible');
                    }
                });
            }, { threshold: 0.5 });

            const fadeInSections = document.querySelectorAll('.fade-in-section');
            fadeInSections.forEach(section => observer.observe(section));

            // --- Main Scroll Event Listener ---
            container.addEventListener('scroll', () => {
                window.requestAnimationFrame(() => {
                    handlePage1Fade();
                    updateProgressBar();
                });
            });
            const sidebar = document.getElementById('sidebar');
            const sidebarToggle = document.getElementById('sidebar-toggle');
            const pageContent = document.getElementById('page-content');

            sidebarToggle.addEventListener('click', () => {
                // Toggle the class on the sidebar itself
                sidebar.classList.toggle('collapsed');
                
                // ALSO toggle the class on the main content area
                pageContent.classList.toggle('sidebar-collapsed');
            });
        });
        
    </script>
</body>
</html>